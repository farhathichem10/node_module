{"version":3,"file":"ng-push-ivy.js","sources":["../../projects/cfw/src/services/push-notifications.service.ts","../../../projects/cfw/src/index.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { PushNotification, Permission } from '../interfaces/push-notification.type';\n\ndeclare const Notification: any;\n\n@Injectable()\nexport class PushNotificationsService {\n\n  permission: Permission;\n\n  constructor() {\n    this.permission = this.isSupported() ? Notification.permission : 'denied';\n  }\n\n  isSupported() {\n    return 'Notification' in window;\n  }\n\n  requestPermission() {\n    if ('Notification' in window) {\n      Notification.requestPermission((status: any) => this.permission = status);\n    }\n  }\n\n  create(title: string, options?: PushNotification): Observable<{notification: Notification, event: any}> {\n\n    return new Observable((obs: any) => {\n\n      if (!('Notification' in window)) {\n        obs.error('Notifications are not available in this environment');\n        obs.complete();\n      }\n\n      if (this.permission !== 'granted') {\n        obs.error(`The user hasn't granted you permission to send push notifications`);\n        obs.complete();\n      }\n\n      const n = new Notification(title, options);\n\n      n.onshow = (e: any) => obs.next({ notification: n, event: e });\n      n.onclick = (e: any) => obs.next({ notification: n, event: e });\n      n.onerror = (e: any) => obs.error({ notification: n, event: e });\n      n.onclose = () => obs.complete();\n    });\n  }\n\n}\n","import {NgModule} from '@angular/core';\nimport {PushNotificationsService} from './services/push-notifications.service';\n\nexport * from './services/push-notifications.service';\nexport * from './interfaces/push-notification.type';\n\n@NgModule({\n  providers: [PushNotificationsService],\n})\nexport class PushNotificationsModule {}\n"],"names":[],"mappings":";;;MAOa,wBAAwB;IAInC;QACE,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,EAAE,GAAG,YAAY,CAAC,UAAU,GAAG,QAAQ,CAAC;KAC3E;IAED,WAAW;QACT,OAAO,cAAc,IAAI,MAAM,CAAC;KACjC;IAED,iBAAiB;QACf,IAAI,cAAc,IAAI,MAAM,EAAE;YAC5B,YAAY,CAAC,iBAAiB,CAAC,CAAC,MAAW,KAAK,IAAI,CAAC,UAAU,GAAG,MAAM,CAAC,CAAC;SAC3E;KACF;IAED,MAAM,CAAC,KAAa,EAAE,OAA0B;QAE9C,OAAO,IAAI,UAAU,CAAC,CAAC,GAAQ;YAE7B,IAAI,EAAE,cAAc,IAAI,MAAM,CAAC,EAAE;gBAC/B,GAAG,CAAC,KAAK,CAAC,qDAAqD,CAAC,CAAC;gBACjE,GAAG,CAAC,QAAQ,EAAE,CAAC;aAChB;YAED,IAAI,IAAI,CAAC,UAAU,KAAK,SAAS,EAAE;gBACjC,GAAG,CAAC,KAAK,CAAC,mEAAmE,CAAC,CAAC;gBAC/E,GAAG,CAAC,QAAQ,EAAE,CAAC;aAChB;YAED,MAAM,CAAC,GAAG,IAAI,YAAY,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;YAE3C,CAAC,CAAC,MAAM,GAAG,CAAC,CAAM,KAAK,GAAG,CAAC,IAAI,CAAC,EAAE,YAAY,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;YAC/D,CAAC,CAAC,OAAO,GAAG,CAAC,CAAM,KAAK,GAAG,CAAC,IAAI,CAAC,EAAE,YAAY,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;YAChE,CAAC,CAAC,OAAO,GAAG,CAAC,CAAM,KAAK,GAAG,CAAC,KAAK,CAAC,EAAE,YAAY,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;YACjE,CAAC,CAAC,OAAO,GAAG,MAAM,GAAG,CAAC,QAAQ,EAAE,CAAC;SAClC,CAAC,CAAC;KACJ;;;YAxCF,UAAU;;;;MCGE,uBAAuB;;;YAHnC,QAAQ,SAAC;gBACR,SAAS,EAAE,CAAC,wBAAwB,CAAC;aACtC;;;;;"}