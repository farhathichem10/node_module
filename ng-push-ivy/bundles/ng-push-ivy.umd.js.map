{"version":3,"file":"ng-push-ivy.umd.js","sources":["../../projects/cfw/src/services/push-notifications.service.ts","../../../projects/cfw/src/index.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { PushNotification, Permission } from '../interfaces/push-notification.type';\n\ndeclare const Notification: any;\n\n@Injectable()\nexport class PushNotificationsService {\n\n  permission: Permission;\n\n  constructor() {\n    this.permission = this.isSupported() ? Notification.permission : 'denied';\n  }\n\n  isSupported() {\n    return 'Notification' in window;\n  }\n\n  requestPermission() {\n    if ('Notification' in window) {\n      Notification.requestPermission((status: any) => this.permission = status);\n    }\n  }\n\n  create(title: string, options?: PushNotification): Observable<{notification: Notification, event: any}> {\n\n    return new Observable((obs: any) => {\n\n      if (!('Notification' in window)) {\n        obs.error('Notifications are not available in this environment');\n        obs.complete();\n      }\n\n      if (this.permission !== 'granted') {\n        obs.error(`The user hasn't granted you permission to send push notifications`);\n        obs.complete();\n      }\n\n      const n = new Notification(title, options);\n\n      n.onshow = (e: any) => obs.next({ notification: n, event: e });\n      n.onclick = (e: any) => obs.next({ notification: n, event: e });\n      n.onerror = (e: any) => obs.error({ notification: n, event: e });\n      n.onclose = () => obs.complete();\n    });\n  }\n\n}\n","import {NgModule} from '@angular/core';\nimport {PushNotificationsService} from './services/push-notifications.service';\n\nexport * from './services/push-notifications.service';\nexport * from './interfaces/push-notification.type';\n\n@NgModule({\n  providers: [PushNotificationsService],\n})\nexport class PushNotificationsModule {}\n"],"names":["Observable","Injectable","NgModule"],"mappings":";;;;;;;QAWE;YACE,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,EAAE,GAAG,YAAY,CAAC,UAAU,GAAG,QAAQ,CAAC;SAC3E;QAED,8CAAW,GAAX;YACE,OAAO,cAAc,IAAI,MAAM,CAAC;SACjC;QAED,oDAAiB,GAAjB;YAAA,iBAIC;YAHC,IAAI,cAAc,IAAI,MAAM,EAAE;gBAC5B,YAAY,CAAC,iBAAiB,CAAC,UAAC,MAAW,IAAK,OAAA,KAAI,CAAC,UAAU,GAAG,MAAM,GAAA,CAAC,CAAC;aAC3E;SACF;QAED,yCAAM,GAAN,UAAO,KAAa,EAAE,OAA0B;YAAhD,iBAqBC;YAnBC,OAAO,IAAIA,eAAU,CAAC,UAAC,GAAQ;gBAE7B,IAAI,EAAE,cAAc,IAAI,MAAM,CAAC,EAAE;oBAC/B,GAAG,CAAC,KAAK,CAAC,qDAAqD,CAAC,CAAC;oBACjE,GAAG,CAAC,QAAQ,EAAE,CAAC;iBAChB;gBAED,IAAI,KAAI,CAAC,UAAU,KAAK,SAAS,EAAE;oBACjC,GAAG,CAAC,KAAK,CAAC,mEAAmE,CAAC,CAAC;oBAC/E,GAAG,CAAC,QAAQ,EAAE,CAAC;iBAChB;gBAED,IAAM,CAAC,GAAG,IAAI,YAAY,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;gBAE3C,CAAC,CAAC,MAAM,GAAG,UAAC,CAAM,IAAK,OAAA,GAAG,CAAC,IAAI,CAAC,EAAE,YAAY,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,GAAA,CAAC;gBAC/D,CAAC,CAAC,OAAO,GAAG,UAAC,CAAM,IAAK,OAAA,GAAG,CAAC,IAAI,CAAC,EAAE,YAAY,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,GAAA,CAAC;gBAChE,CAAC,CAAC,OAAO,GAAG,UAAC,CAAM,IAAK,OAAA,GAAG,CAAC,KAAK,CAAC,EAAE,YAAY,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,GAAA,CAAC;gBACjE,CAAC,CAAC,OAAO,GAAG,cAAM,OAAA,GAAG,CAAC,QAAQ,EAAE,GAAA,CAAC;aAClC,CAAC,CAAC;SACJ;;;;gBAxCFC,eAAU;;;;;QCGX;;;;;gBAHCC,aAAQ,SAAC;oBACR,SAAS,EAAE,CAAC,wBAAwB,CAAC;iBACtC;;;;;;;;;;;;"}